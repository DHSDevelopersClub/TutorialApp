<!-- Use ajax to pull a list of classrooms and then display them.

Has data bound published properties 'search' and 'date'.  Whenever they change,
the `load()` function is called.  `load()` sends an ajax request to
`/_ah/api/tutorialsignup/v1/classes` with search and date parameters equal to
the respective published properties.  `load()` then updates the
`local-classroom-manager` element's data.

Changes to the `local-classroom-manager` element's data are reflected in its
shadow DOM via Polymer magic.  All of the styling of the data is handled
within the `local-classroom-manager` element.

Author: Max Starr
Author: Alexander Otavka
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-animation/core-animation.html">
<link rel="import" href="../paper-spinner/paper-spinner.html">
<link rel="import" href="../local-classroom-card/local-classroom-card.html">

<polymer-element name="local-classroom-manager" attributes="search date">
    <template>
        <style shim-shadowdom>
            #loadingSpinnerWrapper {
                position: fixed;
                left: 0;
                right: 0;
                top: 20%;
                padding-top: 64px;
            }
        </style>

        <div id="container">
            <template repeat="{{classroom in classrooms}}">
                <local-classroom-card data="{{classroom}}"
                                      on-local-signup="{{onSignup}}"
                                      on-local-unsignup="{{onUnsignup}}">
                </local-classroom-card>
            </template>
        </div>

        <div id="loadingSpinnerWrapper"
             vertical center layout>
            <paper-spinner id="loadingSpinner"></paper-spinner>
        </div>

        <core-animation id="contentAnimation" duration="200" fill="forwards">
            <core-animation-keyframe>
                <core-animation-prop name="opacity" value="1"></core-animation-prop>
                <core-animation-prop name="margin-top" value="0px"></core-animation-prop>
            </core-animation-keyframe>
            <core-animation-keyframe>
                <core-animation-prop name="opacity" value="0"></core-animation-prop>
                <core-animation-prop name="margin-top" value="50px"></core-animation-prop>
            </core-animation-keyframe>
        </core-animation>
    </template>

    <script src="local-classroom-manager.js"></script>
</polymer-element>
