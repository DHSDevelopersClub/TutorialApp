<!--Display the current date.

Has data bound published property 'date' with the date being displayed.  `date`
is a string in the format 'yyyy-mm-dd'.  The date displayed should look like
'Wednesday, January 7'.  Right now, the date cannot be changed.

Author: Max Starr
Date algorythem taken from http://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week#Other_purely_mathematical_algorithms
-->

<polymer-element name="locaL-date-spinner" constructor="LocalDateSpinner" attributes="date">
    <template>
        <style type="text/css">
            #dateContainer {
                font-weight: 300;
            }
        </style>
        <div id="dateContainer">{{dayStr}}, {{month}} {{dayNum}}</div>
    </template>
    <script>
        (function () {
            // Run once. Private and static to the element.
            var MONTHS_NUM = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            var MONTHS_STR = ['January', 'Febuary', 'March', 'April', 'May', 'June', 'July',
                              'August', 'September', 'October', 'November', 'December'];
            var DAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednessday', 'Thursday', 'Friday', 'Saturday'];

            // Run for every instance of the element that's created.
            Polymer({
                date: '2015-01-20',
                ready: function () {
                    dateArr = this.date.split('-');
                    if (dateArr[1] == 1 || dateArr[1] == 2) {
                        Y = dateArr[0] - 1;
                    } else {
                        Y = dateArr[0];
                    }
                    y = parseInt(Y.toString().slice(2, 4));
                    c = parseInt(Y.toString().slice(0, 2));
                    d = parseInt(dateArr[2]);
                    m = MONTHS_NUM[parseInt(dateArr[1])-1];
//                    console.log('Y: ' + Y);
//                    console.log('y: ' + y);
//                    console.log('c: ' + c);
//                    console.log('d: ' + d);
//                    console.log('m: ' + m);
                    dayNum = (d + (2.6 * m - 0.2) + y + (y / 4) + (c / 4) - 2 * c)%7;
                    dayStr = DAYS[Math.floor(dayNum)];
//                    console.log(dayStr);
                    this.dayStr = dayStr;
                    this.month = MONTHS_STR[parseInt(dateArr[1])-1];
                    this.dayNum = d;
                }
            });
        })();
    </script>
</polymer-element>
