<!-- Search bar element.

Transitions between button and input states.

Events:
    local-search-mode-enable : When search mode is to be enabled.

Author: Alexander Otavka
-->

<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="../paper-input/paper-input.html" />
<link rel="import" href="../paper-icon-button/paper-icon-button.html" />
<link rel="import" href="../paper-ripple/paper-ripple.html" />
<link rel="import" href="../paper-shadow/paper-shadow.html" />
<link rel="import" href="../core-icon/core-icon.html" />
<link rel="import" href="../core-icons/core-icons.html" />
<link rel="import" href="../core-input/core-input.html" />
<link rel="import" href="../local-media/local-media.html" />

<polymer-element name="local-search-bar" constructor="LocalSearchBar"
                 attributes="search">
    <template>
        <link rel="stylesheet" type="text/css" href="local-search-bar.css" />

        <div id="container">
            <template if="{{!mediaIsMobile || (mode == MODE_SEARCH)}}">
                <div id="boxWrapper">
                    <paper-shadow id="searchBox" z="1" on-tap="{{enableSearchMode}}" animated>
                        <div horizontal layout>
                            <core-icon id="boxIcon" class="noselect" icon="search"></core-icon>

                            <template if="{{mode != MODE_SEARCH}}">
                                <div class="button" flex>
                                    <span>Search</span>
                                    <paper-ripple fit></paper-ripple>
                                </div>
                            </template>

                            <div id="boxInputWrapper" horizontal layout flex hidden>
                                <input id="boxInput" is="core-input"
                                       committedValue="{{search}}"
                                       flex />
                                <paper-icon-button id="clearSearchButton" icon="clear"
                                                   on-tap="{{clearInput}}">
                                </paper-icon-button>
                            </div>
                        </div>
                    </paper-shadow>
                </div>
            </template>

            <template if="{{mediaIsMobile && (mode != MODE_SEARCH)}}">
                <div id="iconButtonWrapper" class="noselect" on-tap="{{enableSearchMode}}">
                    <paper-icon-button id="iconButton" icon="search"
                                       on-tap="{{setSearchMode}}">
                    </paper-icon-button>
                </div>
            </template>
        </div>

        <local-media mediaIsMobile="{{mediaIsMobile}}"></local-media>
    </template>

    <script src="local-search-bar.js"></script>
</polymer-element>
